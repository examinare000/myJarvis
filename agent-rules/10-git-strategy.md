# 10. Gitæˆ¦ç•¥

## ğŸš¨ å¿…é ˆãƒ«ãƒ¼ãƒ«: Gitæˆ¦ç•¥ã®çµ±ä¸€ä»•æ§˜

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

#### åŸºæœ¬åŸå‰‡
- **1ãƒ–ãƒ©ãƒ³ãƒ = 1ç›®çš„**: å„ãƒ–ãƒ©ãƒ³ãƒã¯å˜ä¸€æ˜ç¢ºãªç›®çš„ã‚’æŒã¤
- **ç›®çš„ã®æ··åœ¨ç¦æ­¢**: ç•°ãªã‚‹ç›®çš„ã¯åˆ¥ãƒ–ãƒ©ãƒ³ãƒã§å®Ÿè£…
- **ä¿è­·ãƒ–ãƒ©ãƒ³ãƒ**: masterã€mainã€developãƒ–ãƒ©ãƒ³ãƒã¸ã®ç›´æ¥ã‚³ãƒŸãƒƒãƒˆç¦æ­¢
- **ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: ã™ã¹ã¦ã®é–‹ç™ºã¯ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§

#### ãƒ–ãƒ©ãƒ³ãƒæ§‹æˆ

**ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ:**
- **`main`**: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³æº–å‚™å®Œäº†ã‚³ãƒ¼ãƒ‰ã®ã¿
  - ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã®ã¿
  - ç›´æ¥ã‚³ãƒŸãƒƒãƒˆç¦æ­¢
  - å®‰å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¶­æŒ

- **`develop`**: çµ±åˆé–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ
  - å…¨ã¦ã®é–‹ç™ºã¯ã“ã“ã§å®Ÿæ–½
  - feature ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã®ãƒãƒ¼ã‚¸å…ˆ
  - æ—¥å¸¸çš„ãªé–‹ç™ºä½œæ¥­ã®åŸºç‚¹

**ã‚µãƒãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒ:**
- **`feature/xxx`**: æ–°æ©Ÿèƒ½é–‹ç™º
  - developã‹ã‚‰åˆ†å²
  - developã«ãƒãƒ¼ã‚¸
  - æ©Ÿèƒ½å®Œäº†å¾Œå‰Šé™¤

- **`hotfix/xxx`**: ç·Šæ€¥ä¿®æ­£
  - mainã‹ã‚‰åˆ†å²
  - mainã¨developã®ä¸¡æ–¹ã«ãƒãƒ¼ã‚¸

- **`release/xxx`**: ãƒªãƒªãƒ¼ã‚¹æº–å‚™
  - developã‹ã‚‰åˆ†å²
  - mainã¨developã®ä¸¡æ–¹ã«ãƒãƒ¼ã‚¸

### Claude Codeå‹•ä½œåˆ¶ç´„

#### é–‹ç™ºé–‹å§‹æ™‚ã®å¿…é ˆãƒã‚§ãƒƒã‚¯
```bash
# å¿…ãšç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’ç¢ºèª
git branch
git status

# developãƒ–ãƒ©ãƒ³ãƒã«ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ä½œæ¥­é–‹å§‹
git checkout develop
git pull origin develop
```

#### æ–°æ©Ÿèƒ½é–‹ç™ºãƒ•ãƒ­ãƒ¼
```bash
# developã‹ã‚‰æ–°æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout develop
git checkout -b feature/feature-name

# é–‹ç™ºå®Ÿæ–½ï¼ˆã‚¢ãƒˆãƒŸãƒƒã‚¯ã‚³ãƒŸãƒƒãƒˆï¼‰
git add specific_file.py
git commit -m "æ©Ÿèƒ½: æ–°æ©Ÿèƒ½ã®ç‰¹å®šéƒ¨åˆ†ã‚’å®Ÿè£…"

# å®Œäº†å¾Œdevelopã«ãƒãƒ¼ã‚¸
git checkout develop
git merge --ff-only feature/feature-name
git branch -d feature/feature-name
```

#### ãƒªãƒªãƒ¼ã‚¹æº–å‚™ãƒ•ãƒ­ãƒ¼
```bash
# developã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout develop
git checkout -b release/v1.2.0

# ãƒªãƒªãƒ¼ã‚¹æº–å‚™ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã€æœ€çµ‚ãƒ†ã‚¹ãƒˆç­‰ï¼‰
git add version_file
git commit -m "è¨­å®š: v1.2.0ãƒªãƒªãƒ¼ã‚¹ã®ãŸã‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°"

# mainã«ãƒãƒ¼ã‚¸
git checkout main
git merge --ff-only release/v1.2.0

# ã‚¿ã‚°ä½œæˆ
git tag -a v1.2.0 -m "ãƒªãƒªãƒ¼ã‚¹ v1.2.0"

# developã«å¤‰æ›´ã‚’åæ˜ 
git checkout develop
git merge --ff-only release/v1.2.0
git branch -d release/v1.2.0
```

#### ç·Šæ€¥ä¿®æ­£ãƒ•ãƒ­ãƒ¼
```bash
# mainã‹ã‚‰ç·Šæ€¥ä¿®æ­£ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout main
git checkout -b hotfix/critical-bug-fix

# ä¿®æ­£å®Ÿæ–½
git add fixed_file.py
git commit -m "ä¿®æ­£: ç·Šæ€¥ä¿®æ­£ - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ›ãƒ¼ãƒ«ã‚’ä¿®æ­£"

# mainã¨developã®ä¸¡æ–¹ã«ãƒãƒ¼ã‚¸
git checkout main
git merge --ff-only hotfix/critical-bug-fix

git checkout develop
git merge --ff-only hotfix/critical-bug-fix

git branch -d hotfix/critical-bug-fix
```

### ãƒãƒ¼ã‚¸æˆ¦ç•¥

#### Fast-Forward-OnlyåŸå‰‡
- **`--ff-only` å¿…é ˆ**: ã™ã¹ã¦ã®ãƒãƒ¼ã‚¸ã§fast-forwardã‚’å¼·åˆ¶
- **å±¥æ­´ã®ç·šå½¢åŒ–**: ãƒ–ãƒ©ãƒ³ãƒã®å±¥æ­´ã‚’ç·šå½¢ã«ä¿ã¤
- **ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆç¦æ­¢**: ä¸è¦ãªãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ãªã„

```bash
# âœ… æ­£ã—ã„ãƒãƒ¼ã‚¸
git merge --ff-only feature/new-feature

# âŒ ç¦æ­¢ã•ã‚ŒãŸãƒãƒ¼ã‚¸
git merge feature/new-feature  # ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒä½œæˆã•ã‚Œã‚‹
git merge --no-ff feature/new-feature  # æ˜ç¤ºçš„ã«ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆä½œæˆ
```

#### Rebaseã®æ´»ç”¨
```bash
# featureä½œæ¥­ä¸­ã«developãŒæ›´æ–°ã•ã‚ŒãŸå ´åˆ
git checkout feature/my-feature
git rebase develop

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºå¾Œ
git rebase --continue

# developã«ãƒãƒ¼ã‚¸ï¼ˆfast-forwardã«ãªã‚‹ï¼‰
git checkout develop
git merge --ff-only feature/my-feature
```

### ç·Šæ€¥äº‹æ…‹å¯¾å¿œ

#### mainãƒ–ãƒ©ãƒ³ãƒã«èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸå ´åˆ
```bash
# æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—ã¦developã«ç§»å‹•
git reset --soft HEAD~1
git stash

git checkout develop
git stash pop

git add -A
git commit -m "ç§»å‹•: mainã‹ã‚‰èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸå¤‰æ›´ã‚’developã«ç§»å‹•"
```

#### é–“é•ã£ãŸãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­ã—ãŸå ´åˆ
```bash
# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­å†…å®¹ã‚’stash
git stash

# æ­£ã—ã„ãƒ–ãƒ©ãƒ³ãƒã«ç§»å‹•
git checkout correct-branch

# ä½œæ¥­å†…å®¹ã‚’å¾©å…ƒ
git stash pop

# é€šå¸¸ã®ã‚³ãƒŸãƒƒãƒˆæ‰‹é †ã‚’å®Ÿè¡Œ
git add -A
git commit -m "æ©Ÿèƒ½: æ­£ã—ã„ãƒ–ãƒ©ãƒ³ãƒã§æ©Ÿèƒ½ã‚’å®Ÿè£…"
```

### ã‚³ãƒŸãƒƒãƒˆå“è³ªç®¡ç†

#### ã‚¢ãƒˆãƒŸãƒƒã‚¯ã‚³ãƒŸãƒƒãƒˆã®å¾¹åº•
```bash
# âŒ æ‚ªã„ä¾‹ï¼šè¤‡æ•°ã®å¤‰æ›´ã‚’1ã¤ã®ã‚³ãƒŸãƒƒãƒˆã«
git add .
git commit -m "æ©Ÿèƒ½è¿½åŠ ã¨ãƒã‚°ä¿®æ­£ã¨è¨­å®šå¤‰æ›´"

# âœ… è‰¯ã„ä¾‹ï¼šå¤‰æ›´ã‚’åˆ†å‰²
git add src/new_feature.py tests/test_new_feature.py
git commit -m "æ©Ÿèƒ½: æ–°æ©Ÿèƒ½XYZã‚’å®Ÿè£…"

git add src/bug_fix.py
git commit -m "ä¿®æ­£: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã®ãƒã‚°ã‚’è§£æ±º"

git add config/settings.yaml
git commit -m "è¨­å®š: æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®šã‚’è¿½åŠ "
```

#### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å“è³ª
```bash
# âœ… è‰¯ã„ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
git commit -m "æ©Ÿèƒ½: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†æ©Ÿèƒ½ã‚’å®Ÿè£…"
git commit -m "ä¿®æ­£: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆæ™‚ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±º"
git commit -m "æ”¹å–„: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–"
git commit -m "ãƒ†ã‚¹ãƒˆ: èªè¨¼æ©Ÿèƒ½ã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’è¿½åŠ "
git commit -m "å‰Šé™¤: ä½¿ç”¨ã•ã‚Œãªããªã£ãŸæ—§APIé–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤"

# âŒ æ‚ªã„ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
git commit -m "update"
git commit -m "fix bug"
git commit -m "WIP"
git commit -m "changes"
```

### ç¶™ç¶šçš„çµ±åˆã¨ã®é€£æº

#### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ãƒã‚§ãƒƒã‚¯
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®äº‹å‰ãƒã‚§ãƒƒã‚¯
npm test              # ã¾ãŸã¯ pytest, go testç­‰
npm run lint          # ã¾ãŸã¯ flake8, golintç­‰
npm run typecheck     # ã¾ãŸã¯ mypy, go vetç­‰

# ã™ã¹ã¦é€šéå¾Œã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin feature/my-feature
```

#### è‡ªå‹•åŒ–å¯èƒ½ãªãƒã‚§ãƒƒã‚¯
- **ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ**: ã™ã¹ã¦ã®ãƒ–ãƒ©ãƒ³ãƒã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- **é™çš„è§£æ**: lintã€typecheckã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
- **ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯**: è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³
- **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œè¨¼**: å½¢å¼ãƒã‚§ãƒƒã‚¯

---

**é©ç”¨å„ªå…ˆåº¦**: ğŸ”´ æœ€é«˜ï¼ˆã™ã¹ã¦ã®Gitæ“ä½œã«é©ç”¨å¿…é ˆï¼‰
**æ›´æ–°é »åº¦**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡ã«å¿œã˜ã¦è¦‹ç›´ã—